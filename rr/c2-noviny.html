<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"
 "http://www.w3.org/TR/REC-html40/strict.dtd">
<HTML>
<HEAD>
 <META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-2">
 <TITLE>Realtime radiosity</TITLE>
</HEAD>
<BODY>

 <h2>Novinky, plány</h2>

  <h3>10.6.2003</h3>
   <li>Vydána zrekonstruovaná CD (originály byly poškozeny nevhodným uchycením
       k deskám displomky).
   <li>Obsahují navíc demo Realtime Radiosity 3: Monte Carlo.
   <li>Aktualizovaný RR engine pracuje oddìlenì s r/g/b komponentami.

  <h3>13.12.2000</h3>
   <li>Publikováno
       <a href="rr.pdf">Interaktivní
       globální osvìtlení v komplexních scénách</a> (PDF, 3.5MB)
       shrnující dosavadní výsledky. Práci doprovázejí kompletní
       zdrojáky.
   <li>V lednu budu o radiositì v dynamických scénách referovat 
       na speciálním semináøi o poèítaèové grafice 
       (úterý 9.1, 15.40, Malostranské námìstí, Matfyz, tøetí patro, S4).
   <li>29.1. nebo 30.1. budu práci (diplomku) obhajovat.

  <h3>24.10.2000</h3>
   <li>Poøídil jsem si 3D akcelerátor... stálo hodnì èasu vyøe¹it v¹echny
       problémy spojené s jeho rozchozením, ale koneènì to jak¾tak¾
       funguje a mù¾u se vrátit ke skuteèné radiozitì.
   <li>Trochu mì zaskoèilo, ¾e diplomku musím odevzdat u¾ 15.prosince
       a ne nìjaký èas pøed obhajobou v únoru. Poèítám tedy, ¾e k ní místo 
       úplné implementace toho o èem bude øeè pøilo¾ím jen nìjaké prográmky 
       demonstrující, ¾e to jde a zbytek dodìlám pozdìji.
   <li>Jinak zatím mám ostré stíny z bodového zdroje svìtla
       a zaèínám z nich skládáním vyrábìt mìkké stíny.
       Skládání obrazù pomocí potenciálnì pøesnìj¹ího accumulation 
       bufferu moje karta neumí 
       hardwarovì, tak¾e jako alternativu pou¾ívám blending.
       Úkoly jsou: 
       spoèítat osvìtlení od primárních záøièù (hned jak bude pøinesu ukázku),
       eliminovat øadu artefaktù a chyb v obraze, 
       prosté primární osvìtlení roz¹írit na globální, 
       optimalizovat, optimalizovat, optimalizovat...       

  <h3>16.9.2000</h3>
   <li>Implementoval jsem inkrementální výpoèet v dynamických scénách 
       zhruba v podobì
       jak jsem ho popsal na zaèátku práce pøed 10 mìsíci
       (støílím vhodné mno¾ství paprskù z nejvýznamnìj¹ích
       statických záøièù na pro nì nejvýznamnìj¹í dynamické objekty). 
       Pøi zastavení dynamického objektu se kvalita zvy¹uje.
       Výsledky jsou podle oèekávání dobré jen ve speciálních scénách
       (jednoduché scény s nesvítivými dynamickými objekty),
       v nich by ale byly stejnì dobré nebo lep¹í analytické metody.
       Od teï se zamìøuji zejména na zrychlení výpoètu nad statickou
       scénou, kde vidím je¹tì velkou rezervu (viz ní¾e),
       inkrementální updaty pøitom jako men¹í pøínos mù¾u teoreticky
       rozebrat, ale implementovat je u¾ pravdìpodobnì nebudu.
   <li>Zásadní zvý¹ení kvality a minimalizaci
       vlivu velikosti scény na rychlost by mìlo pøinést vhodné vyu¾ití
       3D akcelerátorù, momentálnì zkoumám metodu
       zalo¾enou na alpha testu a accumulation bufferu v OpenGL.
       Je mo¾né, ¾e podobnou techniku u¾ nìkdo pou¾il,
       zatím jsem ale vidìl jen o tøídu pomalej¹í øe¹ení.
   <li>Scény naèítá ReDox z 3DS vèetnì drah objektù,
       materiály z MGF, pracuje na naèítání celých
       MGF scén. Struktura pou¾itá pøi výpoètu prùseèíku paprsku
       se scénou zùstává BSP strom. Výpoèet osvìtlení
       probíhá nad trojúhelníky pùvodní scény, trojúhelníky
       nasekané BSP stromem u¾ nikde nefigurují. 
   <li>ReDoxùv zobrazovací subsystém nyní podporuje barevné difuzní
       plochy a 1 zrcadlo ve scénì, DOS/Windows/Linux, 
       v¹e bez 3D akcelerátoru. Plánované akcelerované 
       øe¹ení bude vy¾adovat OpenGL a zobrazovat i primární odlesky.
   <li>Mùj souèasný plán na posledních nìkolik mìsícù pøed obhajobou 
       je implementovat akcelerovaný výpoèet a
       pokud to stihnu, vhodnì ho zkombinovat se souèasným støílením
       paprskù (pokud ne, pouze spojení popsat).
       Dynamika bude pravdìpodobnì realizována pouze jako sled 
       statických scén.
       Èásteèné zrychlení implementací inkrementálních updatù 
       akcelerovaného øe¹ení u¾ je mimo mé èasové mo¾nosti.    

  <h3>7.6.2000</h3>
   <li>Za zmínku stojí nasazení vyvíjeného enginu v praxi
       - poprvé byl pou¾it k pøedpoèítání statického osvìtlení v ReDoxovì
       demu Pinokijo, na demoparty <a href="http://avalcon.scene.cz">
       Avalcon 2000</a>.
       Pinokijo ve verzích pro DOS/Windows/Linux je ke sta¾ení na
       <a href="http://movsd.scene.cz/">movsd.scene.cz</a>.
       Realtime zobrazení dynamické scény bude poprvé vidìt
       v demu na demoparty <a href="http://www.fiasko.cz">Fiasko 2000</a>
       v srpnu.
   <li>Ukázalo se, ¾e nepravidelné rozsekání nìkterých polygonù
       pøi generování BSP stromu je pøes v¹echnu snahu pøi interpolaci
       pøíli¹ vidìt (výpoèty radiozity probíhají nad nasekanými polygony).
       Bude nutné poèítat nad pùvodní scénou,
       k tomu je tøeba znaèných zmìn... a pravdìpodobnì rovnou
       volba a implementace jiné datové struktury pro výpoèet prùseèíku
       se scénou
       (podle <a href="http://www.cgg.cvut.cz/GOLEM/bes.html">BES Projectu</a>
       na mì nejlépe pùsobí KD tree).
       BSP strom ov¹em není pou¾it jen k poèítání prùseèíku,
       ale i k efektivnímu softwarovému renderingu.
       Naèítání scén z jiných formátù je pak bohu¾el nutné odlo¾it
       a¾ za vyøe¹ení v¹ech tìchto problémù.
   <li>S ReDoxem prioritnì pracujeme na dynamických objektech, viz slíbená
       prezentace na Fiasku 2000.

  <h3>12.4.2000</h3>
   <li>cpoc udìlal podporu OpenGL (cpoc - viz. <a href="#autori">Autoøi</a>).
   <li>Pøepsal jsem hledání prùseèíku se scénou (prùchod BSP stromem,
       prùseèík s trojúhelníkem), program je teï ve scénì s 66 trojúhelníky
       2x rychlej¹í, na vìt¹ích scénách je¹tì víc.
   <li>Sní¾il jsem spotøebu pamìti postupnì a¾ na pìtinu a pøepsal nìkteré
       rutiny z O(n^2) na O(n), v¹echno pøipravuji na velké scény (pro zaèátek
       sto tisíc trojúhelníkù).
   <li>Do popøedí todo listu se dostalo roz¹íøit/zmìnit vstupní formát,
       aby ¹lo naèítat známé scény a porovnat na nich
       kvality na¹eho a konkurenèních programù.

  <h3>22.3.2000</h3>
   <li>INTERPOLACE:
       Uvìdomil jsem si, ¾e interpolace není jen trik na zlep¹ení výsledkù,
       ale neoddìlitelná souèást problému; nelze ji nechat na
       libovùli zobrazovacího subsystému.
       Tak¾e pro zobrazovací subsystém poèítám vhodné hodnoty ve vrcholech
       subtrianglù, ReDox je zobrazuje.
       Interpolace nìkolikanásobnì sni¾uje náhodný ¹um ve výsledcích.
   <li>CLUSTERY:
       Roz¹íøil jsem hierarchii plo¹ek o clustery - mno¾iny blízkých,
       podobnì orientovaných trojúhelníkù, které mohou pøijímat
       a vysílat energii spoleènì jako jediná plo¹ka (je to efektivnìj¹í).
       Clustery zatím tvoøí jen jednu vrstvu, pozdìji poèítám s hierarchií
       men¹ích a vìt¹ích clusterù.
       Zatím se taky uplatòují jen pøi støílení energie
       do scény, pozdìji pøidám i zachytávání energie ze scény.
       Pou¾ití clusterù typicky dvakrát zrychluje výpoèet
       a dvakrát zvy¹uje ¹um ve výsledcích.
       Vy¹¹í ¹um se ov¹em eliminuje interpolací, zùstává vy¹¹í rychlost.
   <li>LIGHTMAPY:
       Dosud se pøi pøekreslování scény na obrazovce zobrazoval ka¾dý
       subtriangl zvlá¹». Jejich poèet ov¹em neustále roste a
       zobrazování se neúnosnì zpomaluje.
       ReDox proto zavedl pro ka¾dý trojúhelník lightmapu - texturu
       vyjadøující svìtlost. Lightmapy staèí aktualizovat jen pøi zmìnì
       osvìtlení ve scénì (typicky po zpøesnìní konfiguraèních faktorù),
       co¾ nebývá moc èasto. Pøi procházení scénou se pak zobrazují u¾
       pøipravené lightmapy.
   <li>Zdrojáky mìly minule asi 70KB, teï 140KB
       (ReDoxùv generátor BSP stromù jako samostatný program nepoèítám).
   <li>Nahoru jsem pøidal galerii a dolù na stránku pro srovnání
       <a href="#vysledky">nové obrázky staré scény</a>,
       jinak se opìt nic nezmìnilo.
   <li>Aktuální todo list (od nejbli¾¹ích úkolù a¾ po ty, na které
       mo¾ná nikdy nedojde):<ul>
       <li>rozsireni scen o dynamicke objekty
       <li>zobrazeni dynamickych objektu
       <li>vypocet dynamickych stinu
       <li>aby moh triangl efektivne odpovedet jestli (a pokud mozno jak moc)
           je videt, nebo aspon jak to bylo v minulem snimku
           (aby se negenerovaly dynamicke stiny na plochach ktere nejsou videt)
       <li>prozkoumat moznost analytickeho vypocet faktoru
       <li>sireni zasahu nahoru do clusteru
       <li>hierarchie clusteru
       <li>prozkoumat faktory plocha-ivertex nebo ivertex-ivertex
       <li>materialy
       <li>podpora akceleratoru
       <li>dvojity texturemapping (lightmapa+textura materialu)
       <li>zobrazeni lesklych ploch
       </ul>
   <li>První dynamické objekty budou nejdøív za mìsíc, ale mo¾ná
       taky za dva... a pokud døív zjistím jak analyticky poèítat faktory,
       dostanou ty pøednost.

  <h3>24.1.2000</h3>
   <li>ReDox udìlal procházení scénou a její reprezentaci BSP stromem,
       prùseèík paprsku se scénou je teï tedy v èase O(log(n)).
   <li>Obraz prùbì¾nì zpøesòuji bìhem procházení scénou, není u¾ ¾ádná
       konstanta urèující kvalitu.
   <li>Podle potøeby dìlím i záøièe, døíve svítil v¾dy celý triangl rovnomìrnì.
   <li>Pamìti staèí nìkolikrát ménì, dál u¾ to ale zlep¹it nepùjde
       a s dynamickými objekty nároky zase mírnì porostou.
       Mých 32MB se vyèerpá po øádovì stovkách sekund
       neustálého zpøesòování statické scény, kvalita v tu chvíli u¾ je ov¹em
       dobrá.
   <li>Dolù na stránku jsem pøidal pár nových obrázkù,
       jinak se nic nezmìnilo.
   <li>Mùj plán pro následující mìsíc je implementovat dynamické objekty.
  <h3>20.12.1999</h3>
   <li>Pøibylo nìkolik kapitol (Výpoèet konfiguraèních údajù, Zobrazení scény, Výsledky),
       k dispozici jsou první obrázky ze statické scény.
   <li>ReDox udìlal zobrazování scény, já první funkèní výpoèet
       globálního osvìtlení v pevnì zadané kvalitì.
   <li>Na nejbli¾¹í týdny plánuji prùbì¾né zkvalitòování statické scény,
       divák se bude moci bìhem poèítání procházet scénou.
       Dosud ne¹lo bìhem výpoètu nic dìlat, nebyly ani vidìt mezivýsledky.
       Dal¹ím krokem bude implementace dynamických objektù tak, jak
       jsem je popsal v kapitole dynamika scény.
  <h3>2.12.1999</h3>
   Vznik této stránky.

</BODY>
</HTML>
