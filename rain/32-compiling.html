<!DOCTYPE HTML>
<HTML lang="en">
<head>
 <META charset="UTF-8">
 <META name="viewport" content="width=device-width, initial-scale=1">
 <title>Resident Audio Interface (RAIN)</title>
 <LINK rel="stylesheet" type="text/css" href="rain.css">
</head>
<body>
<div class="menu">
 <h2>Resident Audio Interface</h2>
     RAIN
 <br>&nbsp&nbsp&nbsp<a href="11-abstract.html">What's that?</a>
 <br>&nbsp&nbsp&nbsp<a href="12-news.html">News</a>
 <br>&nbsp&nbsp&nbsp<a href="13-current-state.html">Current state</a>
 <br>&nbsp&nbsp&nbsp<a href="14-future.html">Future</a>
 <br>&nbsp&nbsp&nbsp<a href="15-download.html">Download</a>
 <br>&nbsp&nbsp&nbsp<a href="16-contact.html">Contact</a>
 <br>
 <br>USING RAIN
 <br>&nbsp&nbsp&nbsp<a href="21-high-api.html">High-level API</a>
 <br>&nbsp&nbsp&nbsp<a href="22-running.html">Running applications</a>
 <br>&nbsp&nbsp&nbsp<a href="23-configuring.html">Configuring servers</a>
 <br>&nbsp&nbsp&nbsp<a href="24-projects.html">Projects using RAIN</a>
 <br>
 <br>DEVELOPING RAIN
 <br>&nbsp&nbsp&nbsp<a href="31-low-api.html">Low-level API</a>
 <br>&nbsp&nbsp&nbsp<a href="32-compiling.html">Compiling servers</a>
</div>
<div class="contents">

<h3>Compiling servers</h3>

How to compile servers?<br>
Only for RAIN developers.
<ul>
<li>Get Watcom C/C++.
<li>Make amp11 library (subset of
    <a href="https://www.physik.tu-muenchen.de/~nbeisert/amp11.html">amp11</a>)
    from sources in /src/amp. amp11 requires Watcom 11.0 and Wmake.
<li>Get <a href="https://www.s2.org/midas">Midas</a> (I used and recommend
    version 1.1.2).
<li>Bugfix and enhance Midas with /src/midas files.<br>
    <font size="-1">
    Note: Midas 1.1.2 bugs (midasdll.c, doscnf.c, win32cnf.c) must be fixed
    (see <a href="https://dee.cz/texty/c_midas.html">Midas buglist</a>)
    and file access (file.*) and wav decoder (midasfx.*) slightly enhanced
    before using it.
    It's possible to compile only these files, not whole Midas,
    and give .objs to linker, the same code with bugs from midas.lib will not 
    be used.<br>
    Also Midas timer code was modified in precompiled RAIN servers 
    so that background play doesn't
    speed up timer (buffers must be longer then,
    in sdevice.h DMABUFLEN 10 (was 25), in dsm.h MIXBUFLEN 10 (was 40)).
    You don't have to do this modification, clients just
    won't be allowed to speed-up timer.
    </font>
<li>Make Midas library with Watcom.
<li>Set paths in makefile and make RAIN servers. Of course with Watcom.<br>
    Windows server (rain-win.c) may also be compiled with other compilers, but
    it wasn't tested, DOS server (rain-dos.c) needs Watcom because of DOS4GW.<br>
    <font size="-1">
    Note: Stub.exe (stub.c) is stub for windows RAIN.EXE server.
    It calls DOS server with DOS4GW.EXE RAIN.LE command.
    Stub is inserted by Watcom linker option 'option stub=stub.exe'.
    </font>

</ul>

</div>
</body>
</html>